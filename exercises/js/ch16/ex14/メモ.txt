commonJSで動かす。

ーーー
型変換が非常に複雑な動きになってる。
ワーカースレッドとのやり取りで型が意図せず変わったり、ピクセルデータにしないとガウシアンフィルタを動かせないし、、
いろいろ苦戦してやっと動いた。あんまりよくわかっていない。


まず、index.htmlは以前のコードのまま変更していない。

index.jsは変更していて、画像を取得したら、画像データのファイルをサーバーに送っている。
index.jsはサーバーから帰ってきた、フィルタ済みのバイナリの画像データを変換して画面に表示している。

server.jsはindex.jsからのリクエストを受け取って、ワーカースレッドに投げる
ワーカースレッドでの画像処理が終わったらクライアント、index.jsに返す。

ワーカースレッドでは型変換をしつつ、ガウシアンフィルタをかけて、バイナリデータを返してる。